pipeline {
    agent any
    
    environment {
        ANGULAR_CLI_VERSION = 'latest' // Change this to your desired Angular CLI version
        ANGULAR_APP_DIRECTORY = 'D:\\PWA\\angular-pwa' // Change this to your Angular app directory
    }

    stages {
        stage('Checkout') {
            steps {
                echo 'Checking out source code...'
                // Checkout your Angular app source code from version control
                // For example, if you're using Git:
                git 'https://github.com/UsmanSaddique/pwaSample'
            }
        }
        
        stage('Build') {
            steps {
                echo 'Building Angular app...'
                // Install Angular CLI
                sh "npm install "
                
                // Install project dependencies
                sh "cd ${ANGULAR_APP_DIRECTORY} && npm install"
                
                // Build Angular app
                sh "cd ${ANGULAR_APP_DIRECTORY} && ng build --prod"
            }
        }
        
        stage('Deploy') {
            steps {
                echo 'Deploying Angular app...'
                // Deploy Angular app to local server
                sh "cd ${ANGULAR_APP_DIRECTORY}/dist && http-server -p 8081 -c-1 angular-pwa"
            }
        }
    }
}
